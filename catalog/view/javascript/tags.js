function _parseSep(url){var self=this,urlSep=null;url=url.indexOf('?')>-1?url.split('?')[0]:url.split(';')[0];urlSep={'f':'?','n':'&'};return{url:url,urlSep:urlSep};}function getParameterByName(name,url){if(!url){url=window.location.href;}name=name.replace(/[\[\]]/g,"\\$&");var regex=new RegExp("[?&]"+name+"(=([^&#]*)|&|#|$)"),results=regex.exec(url);if(!results)return null;if(!results[2])return'';return decodeURIComponent(results[2].replace(/\+/g," "));}function show_tags(elem){if($(elem).parent().parent().hasClass('show_tags')!==false){all_tags=$(elem).parent().attr('data-all-tags');$(elem).empty().append(all_tags);$(elem).parent().parent().removeClass('show_tags');}else{main_tags=$(elem).parent().attr('data-main-tags');$(elem).empty().append(main_tags);$(elem).parent().parent().addClass('show_tags');}}$(document).ready(function(){height_tags_block=$('.tags_container .inner_tags_container').height();if(height_tags_block<45){$('.tags_container .button_more_tags').hide();}$(".set-display-items-num.tags_display").click(function(){if($(this).hasClass("active")){return;}_lastAjaxUrl=decodeURI(document.location.href);url=document.location.href.split('#')[0];_url=_parseSep(url).url;$("#items-display-num").find(".sort-item a").removeClass("active");$(this).addClass("active");_limit=$(this).data("num");_lastAjaxUrl=_url+"?limit="+_limit;window.location.href=_lastAjaxUrl;});$("#set-sort-by-popularity_tags").click(function(){if($(this).hasClass("active")){return;}_lastAjaxUrl=decodeURI(document.location.href);url=document.location.href.split('#')[0];_url=_parseSep(url).url;$("#sort-options").find(".sort-item a").removeClass("active");$(this).addClass("active");_sort_type='p.popular';_sort_order='DESC';_lastAjaxUrl=_url+"?sort="+_sort_type+"&order="+_sort_order;window.location.href=_lastAjaxUrl;});$("#set-sort-by-name_tags").click(function(){if($(this).hasClass("active")){return;}_lastAjaxUrl=decodeURI(document.location.href);url=document.location.href.split('#')[0];_url=_parseSep(url).url;$("#sort-options").find(".sort-item a").removeClass("active");$(this).addClass("active");_sort_type='pd.name';_sort_order='ASC';_lastAjaxUrl=_url+"?sort="+_sort_type+"&order="+_sort_order;window.location.href=_lastAjaxUrl;});$("#set-sort-by-price_tags").click(function(){$("#sort-options").find(".sort-item a").removeClass("active");$(this).addClass("active");_sort_type='p.price';_sort_order=$(this).data("value");_lastAjaxUrl=decodeURI(document.location.href);url=document.location.href.split('#')[0];_url=_parseSep(url).url;if(_lastAjaxUrl.indexOf("sort=p.price")!=-1){var order=getParameterByName('order',_lastAjaxUrl);_sort_order=order=="ASC"?"DESC":"ASC";$(this).data("value",_sort_order);}$(".arrow-icons").show();if($(this).data("value")=='ASC'){$(this).data("value","DESC");$(".arrow-icons").find(".fa").removeClass("fa-angle-down");$(".arrow-icons").find(".fa").addClass("fa-angle-up");}else{$(this).data("value","ASC");$(".arrow-icons").find(".fa").removeClass("fa-angle-up");$(".arrow-icons").find(".fa").addClass("fa-angle-down");}_lastAjaxUrl=_url+"?sort="+_sort_type+"&order="+_sort_order;window.location.href=_lastAjaxUrl;});});